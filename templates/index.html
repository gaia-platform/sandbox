<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Gaia Sandbox</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">

    <!-- Favicons -->
    <link href="{{ url_for('static', filename='img/favicon.png') }}" rel="icon">

    <!-- Google Fonts (Lato and Roboto)-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">

    <!-- Main Stylesheet File -->
    <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">

    <!-- Bootstrap Tour -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-tour/0.12.0/css/bootstrap-tour-standalone.css"
        rel="stylesheet">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-tour/0.12.0/js/bootstrap-tour-standalone.min.js"></script>
</head>

<body>
    <div id="coordinator" data-coordinator={{coordinator}}></div>
    <div id="scenario" data-scenario={{scenario}}></div>
    <div stackColumnsAt="tablet" class="div" data-name="div-1">
        <div class="builder-columns columns header">
            <div class="builder-column column">
                <a href="https://www.gaiaplatform.io/"
                    image="https://cdn.builder.io/api/v1/image/assets%2F5864aab9464741c882f7bea9704bedfc%2F4c7ab4184c814feda5eadf6581af562f"
                    backgroundPosition="right" backgroundSize="contain" altText="Gaia Platform" builderTag="a" class="a"
                    data-name="a-1">
                    <picture>
                        <source srcset="
              https://cdn.builder.io/api/v1/image/assets%2F5864aab9464741c882f7bea9704bedfc%2F4c7ab4184c814feda5eadf6581af562f?format=webp&width=100   100w,
              https://cdn.builder.io/api/v1/image/assets%2F5864aab9464741c882f7bea9704bedfc%2F4c7ab4184c814feda5eadf6581af562f?format=webp&width=200   200w,
              https://cdn.builder.io/api/v1/image/assets%2F5864aab9464741c882f7bea9704bedfc%2F4c7ab4184c814feda5eadf6581af562f?format=webp&width=400   400w,
              https://cdn.builder.io/api/v1/image/assets%2F5864aab9464741c882f7bea9704bedfc%2F4c7ab4184c814feda5eadf6581af562f?format=webp&width=800   800w,
              https://cdn.builder.io/api/v1/image/assets%2F5864aab9464741c882f7bea9704bedfc%2F4c7ab4184c814feda5eadf6581af562f?format=webp&width=1200 1200w,
              https://cdn.builder.io/api/v1/image/assets%2F5864aab9464741c882f7bea9704bedfc%2F4c7ab4184c814feda5eadf6581af562f?format=webp&width=1600 1600w,
              https://cdn.builder.io/api/v1/image/assets%2F5864aab9464741c882f7bea9704bedfc%2F4c7ab4184c814feda5eadf6581af562f?format=webp&width=2000 2000w,
              https://cdn.builder.io/api/v1/image/assets%2F5864aab9464741c882f7bea9704bedfc%2F4c7ab4184c814feda5eadf6581af562f
            " type="image/webp" />

                        <img src="https://cdn.builder.io/api/v1/image/assets%2F5864aab9464741c882f7bea9704bedfc%2F4c7ab4184c814feda5eadf6581af562f"
                            srcset="
              https://cdn.builder.io/api/v1/image/assets%2F5864aab9464741c882f7bea9704bedfc%2F4c7ab4184c814feda5eadf6581af562f?width=100   100w,
              https://cdn.builder.io/api/v1/image/assets%2F5864aab9464741c882f7bea9704bedfc%2F4c7ab4184c814feda5eadf6581af562f?width=200   200w,
              https://cdn.builder.io/api/v1/image/assets%2F5864aab9464741c882f7bea9704bedfc%2F4c7ab4184c814feda5eadf6581af562f?width=400   400w,
              https://cdn.builder.io/api/v1/image/assets%2F5864aab9464741c882f7bea9704bedfc%2F4c7ab4184c814feda5eadf6581af562f?width=800   800w,
              https://cdn.builder.io/api/v1/image/assets%2F5864aab9464741c882f7bea9704bedfc%2F4c7ab4184c814feda5eadf6581af562f?width=1200 1200w,
              https://cdn.builder.io/api/v1/image/assets%2F5864aab9464741c882f7bea9704bedfc%2F4c7ab4184c814feda5eadf6581af562f?width=1600 1600w,
              https://cdn.builder.io/api/v1/image/assets%2F5864aab9464741c882f7bea9704bedfc%2F4c7ab4184c814feda5eadf6581af562f?width=2000 2000w,
              https://cdn.builder.io/api/v1/image/assets%2F5864aab9464741c882f7bea9704bedfc%2F4c7ab4184c814feda5eadf6581af562f
            " class="image" />
                    </picture>

                    <div class="builder-image-sizer image-sizer"></div>
                </a>
            </div>

            <div class="builder-column column-2">
                <div class="div-2">
                    <p>Sandbox</p>
                </div>
            </div>

            <div class="builder-column privacy-column">
                <a id="privacy-button" class="a-2" data-name="a-2">
                    Privacy
                </a>
            </div>

            <div class="builder-column column-4">
                <a href="https://www.gaiaplatform.io/sign-up" class="a-3 button" data-name="a-3" id="sign-up-button">
                    Get the SDK
                </a>
            </div>
        </div>
    </div>
    {% if maintenance == 'true' %}
    <div stackColumnsAt="tablet" class="div-3" data-name="div-2">
        <div class="builder-columns columns">
            <div class="builder-column column-4">
                <div class="div-2">
                    <p>Down for maintenance. Please check back later.</p>
                </div>
            </div>
        </div>
    </div>
    {% else %}
    <div stackColumnsAt="tablet" class="div-3" data-name="div-2">
        <div class="builder-columns columns">
            <div class="builder-column column-5">
                <div class="div-4" style="width: 100%;">
                    <span class="editor-tab button" data-tab-name="ddl" id="ddl">DDL</span>

                    {% if scenario != 'direct_access' %}
                    <span class="editor-tab button selected-tab" data-tab-name="ruleset" id="ruleset">Ruleset</span>
                    {% endif %}

                    {% if scenario == 'hello_world' or scenario == 'frequent_flyer' or scenario == 'direct_access' %}
                    <span class="editor-tab button" data-tab-name="cpp" id="cpp">CPP</span>
                    {% endif %}
                    <span id="scenario-name">
                        {% if scenario == 'hello_world' %}
                        Hello World
                        {% elif scenario == 'frequent_flyer' %}
                        Frequent Flyer Example
                        {% elif scenario == 'direct_access' %}
                        Direct Access Tutorial
                        {% elif scenario == 'rules' %}
                        Rules Tutorial
                        {% endif %}
                    </span>
                    <span style="position: absolute; right: 0;" class="editor-tab button" data-tab-name="run"
                        id="ctrl-button">Loading</span>
                </div>

                <div class="div-5" id="sandboxEditor" style="height: 58vh; border: thin solid black;">
                </div>
                <span id="output">Output</span>
                <div class="div-5" id="outputTerminalDiv"
                    style="height: 20vh; border: thin solid black;">
                    <textarea id="outputTerminal" name="outputTerminal" readonly></textarea>
                </div>
            </div>

            <div class="builder-column column-6">
                <div stackColumnsAt="tablet" class="div-6" data-name="div-3">
                    <div class="builder-columns columns">
                        <div class="builder-column column-7">
                            <span class="span-4 button" id="reset-button">Reset</span>
                        </div>

                        <div class="builder-column column-8">
                            {% if scenario == 'amr_swarm' or scenario == 'access_control' %}
                            <span style="background-color:#00B7DD" class="span-4 button" id="get-started-button">Read
                                me</span>
                            {% endif %}
                        </div>

                        <div class="builder-column column-9">
                            <form>
                                <label for="scenario">Pick a Scenario</label>
                                <select name="scenario" id="scenario" onchange="this.form.submit();">
                                    <option>Select...</option>
                                    <!-- temporarily disable amr_swarm and access_control -->
                                    <!--
                                    <option value="amr_swarm">AMR Swarm</option>
                                    <option value="access_control">Access Control</option>
                                    -->
                                    <option value="hello_world">Hello World</option>
                                    <option value="frequent_flyer">Frequent Flyer</option>
                                    <option value="direct_access">Direct Access Tutorial</option>
                                    <option value="rules">Rules Tutorial</option>
                                </select>
                            </form>
                        </div>

                        <!-- These buttons should only be available when running without communicating with
                             a coordinator. Otherwise the coordinator is responsible for exchanging any IDs. -->
                        {% if coordinator == 'none' %}
                        <div class="builder-column column-9">
                            <span class="span-5 button" id="session-id-button">Show SESSION_ID</span>
                        </div>

                        <div class="builder-column column-10">
                            <span class="span-6 button" id="test-button">Show Subscribe UUID</span>
                        </div>
                        {% endif %}

                    </div>
                </div>

                <div class="div-7">
                    <iframe {% if scenario=='amr_swarm' or scenario=='access_control' %}
                            id="godot"
                            src="{{ url_for('static', filename='visual/index.html') }}"
                        {% elif scenario=='rules' %}
                            id="rules-document"
                            src="https://gaia-platform.github.io/gaia-platform-docs.io/articles/rulesets-gaia-rulesets.html#gaia-rulesets"
                        {% elif scenario=='direct_access' %}
                            id="direct-access-document"
                            src="https://gaia-platform.github.io/gaia-platform-docs.io/articles/apps-direct-access.html#using-the-direct-access-classes"
                        {% else %}
                            id="tutorial"
                            src="{{ url_for('static', filename='visual/tutorial.html') }}"
                        {% endif %}
                        style="position: relative; height: 100%; width: 100%;" frameBorder="0" scrolling="yes"></iframe>
                </div>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- Privacy Modal -->
    <div id="privacy-modal" class="modal">
        <div id="privacy-modal-content">
            <p>
                The Gaia Sandbox system stores two
                <strong>strictly necessary cookies</strong>.
                Deleting these cookies will simply reset your Sandbox experience,
                which will mean you lose any code or edits made in the sandbox.
            </p>
            <span id="privacy-modal-confirm" class="modal-close-button button">OK</span>
        </div>
    </div>

    <!-- Get Started Modal -->
    <div id="get-started-modal" class="modal">
        <div id="get-started-content">
            <div id="get-started-md">
                <p>
                    No getting started guide found
                </p>
            </div>
            <span class="modal-close-button button">OK</span>
        </div>
    </div>

    <script src="{{ url_for('static', filename='lib/monaco/vs/loader.js') }}"></script>

    <!-- Bootstrap Tour -->
    <script src="{{ url_for('static', filename='js/tour.js') }}"></script>

    <!-- Main and MQTT Javascript File -->
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script src="{{ url_for('static', filename='dist/mqtt_bundle.js') }}"></script>

</body>

</html>
